<!DOCTYPE html>
<html lang="">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <link rel="icon" href="https://upload.wikimedia.org/wikipedia/commons/thumb/1/12/Google_Photos_icon_%282020%29.svg/1024px-Google_Photos_icon_%282020%29.svg.png" type="image/svg+xml">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        /* === Переменные Цветов === */
        :root {
            --color-text-light: #444746;
            --color-text-dark: #C4C7C5;
            --color-background-light: #F0F4F9;
            --color-background-dark: #1E1F20;
            --color-surface-light: #d8dadb;
            --color-surface-dark: #3c4043;
            --color-card-background-light: #ffffff;
            --color-card-background-dark: #292a2e;
            --color-divider-light: #C4C7C5;
            --color-divider-dark: #444746;
            --color-link-active-light: #004A77;
            --color-link-active-dark: #C2E7FF;
            --color-link-active-highlight-light: #C2E7FF;
            --color-link-active-highlight-dark: #004A77;
            --color-badge-light: #004A77;
            --color-badge-dark: #C2E7FF;
            --color-shadow-light: rgba(60, 64, 67, 0.15);
            --color-shadow-dark: rgba(0, 0, 0, 0.5);
            --font-size-small: 14px;
            --header-item-spacing: 8px;
            --header-element-height: 36px;
            --search-width-desktop: 180px; 
            --search-width-mobile: 130px; 
        }

        /* --- Темы --- */
        body.dark-theme {
            --color-text: var(--color-text-dark);
            --color-text-on-surface: #e8eaed;
            --color-background: var(--color-background-dark);
            --color-surface: var(--color-surface-dark);
            --color-card-background: var(--color-card-background-dark);
            --color-divider: var(--color-divider-dark);
            --color-shadow: var(--color-shadow-dark);
            --color-link-active: var(--color-link-active-dark);
            --color-link-active-highlight: var(--color-link-active-highlight-dark);
            --color-badge: var(--color-badge-dark);
        }

        body { /* Light Theme Defaults */
            --color-text: var(--color-text-light);
            --color-text-on-surface: #202124;
            --color-background: var(--color-background-light);
            --color-surface: var(--color-surface-light);
            --color-card-background: var(--color-card-background-light);
            --color-divider: var(--color-divider-light);
            --color-shadow: var(--color-shadow-light);
            --color-link-active: var(--color-link-active-light);
            --color-link-active-highlight: var(--color-link-active-highlight-light);
            --color-badge: var(--color-badge-light);
        }

        /* === Общие Стили === */
        * { box-sizing: border-box; scrollbar-width: none; }
        *::-webkit-scrollbar { display: none; width: 0; height: 0; }

        body {
            font-family: 'Roboto', Arial, sans-serif;
            margin: 0;
            padding-top: 64px; 
            background-color: var(--color-background);
            color: var(--color-text-on-surface);
            transition: background-color 0.3s, color 0.3s;
        }
        
        a { text-decoration: none; color: inherit; }

        /* === Шапка === */
        .header {
            position: fixed; top: 0; left: 0; width: 100%; height: 64px;
            display: flex; align-items: center; padding: 0 24px;
            background-color: var(--color-background);
            border-bottom: 1px solid var(--color-divider);
            box-shadow: 0 2px 4px var(--color-shadow);
            z-index: 1000;
            transition: background-color 0.3s, border-color 0.3s;
        }
        
        .logo-link { display: flex; align-items: center; margin-right: 32px; flex-shrink: 0; overflow: hidden; }
        .logo { width: 32px; height: 32px; margin-right: 8px; }
        .logo-text {
            font-size: 20px; font-weight: 500; color: var(--color-text);
            transform: translateY(-2px); white-space: nowrap; overflow: hidden;
            text-overflow: ellipsis; display: block; width: 118px;
            /* Изменение: Центрирование текста внутри блока */
            text-align: center;
        }

        /* --- Фильтры Годов --- */
        .filters { 
            display: flex; 
            flex-grow: 1; 
            margin-right: 0; 
            overflow: hidden; 
            flex-shrink: 1; 
            /* НОВОЕ СВОЙСТВО: центрирование содержимого */
            justify-content: center;
        }
        
        .filter-link {
            width: 56px; margin-right: 8px; padding: 0;
            display: inline-flex; justify-content: center; align-items: center;
            height: 32px; border-radius: 16px;
            font-size: var(--font-size-small); font-weight: 500;
            color: var(--color-text);
            transition: background-color 0.2s, color 0.2s;
            cursor: pointer; user-select: none; flex-shrink: 0;
        }
        .filter-link:hover { background-color: var(--color-surface); }
        .filter-link.active { color: var(--color-link-active); background-color: var(--color-link-active-highlight); }
        
        /* --- Меню и Дропдауны --- */
        .menu-content, .sort-content {
            display: none; position: absolute; top: 48px;
            background-color: var(--color-card-background);
            box-shadow: 0 4px 8px var(--color-shadow);
            border-radius: 8px; width: 64px; z-index: 100; padding: 0; 
        }
        .menu-content.show, .sort-content.show { display: block; }
        
        .menu-content {
            left: 0; max-height: calc(16 * 1.4em + 20px); overflow-y: auto;
            scrollbar-width: thin; scrollbar-color: var(--color-text) var(--color-surface);
        }
        
        .sort-content {
            left: 50%; transform: translateX(-50%);
            max-height: calc(16 * 1.4em + 20px); overflow-y: auto;
            width: 200px;
        }

        .menu-content-item, .sort-content-item {
            display: block; padding: 10px 8px;
            font-size: var(--font-size-small); font-weight: 500;
            color: var(--color-text); cursor: pointer; white-space: nowrap;
        }
        .menu-content-item:hover, .sort-content-item:hover { background-color: var(--color-surface); }
        .menu-content-item.active, .sort-content-item.active {
            color: var(--color-link-active); font-weight: 500;
            background-color: var(--color-link-active-highlight);
        }
        
        .menu-dropdown { position: relative; display: none; margin-right: var(--header-item-spacing); flex-shrink: 0; }
        .menu-button {
            width: 40px; height: 40px; padding: 0;
            display: flex; align-items: center; justify-content: center;
            border-radius: 50%; cursor: pointer; transition: background-color 0.2s; color: var(--color-text); 
        }
        .menu-button:hover { background-color: var(--color-surface); }

        /* --- Сортировка --- */
        .sort-dropdown { margin-right: 12px; position: relative; flex-shrink: 0; }
        .sort-button {
            display: flex; align-items: center; padding: 0 12px 0 8px;
            height: var(--header-element-height); width: 200px;
            border-radius: 18px; background-color: var(--color-surface);
            font-size: var(--font-size-small); font-weight: 500;
            cursor: pointer; user-select: none; color: var(--color-text);
            transition: background-color 0.2s, width 0.3s, padding 0.3s;
        }
        .sort-button:hover { filter: brightness(0.9); }
        .sort-button-icon { margin-right: 8px; font-size: 20px; color: var(--color-text); }
        .sort-button-text { transition: opacity 0.3s; }
        
        .sort-content-item { display: flex; align-items: center; }
        .sort-content-item .material-icons { margin-right: 12px; font-size: 20px; color: var(--color-text); }
        /* Добавил отступ к тексту сортировки, чтобы он не сливался с иконкой */
        .sort-content-item span[data-sort-label] { margin-right: 8px; }

        /* --- Поиск --- */
        .search-container {
            margin-right: var(--header-item-spacing); position: relative;
            flex-grow: 0; width: 180px; transition: width 0.3s; flex-shrink: 0;
        }
        .search-input {
            padding: 0 36px 0 40px; border: none; border-radius: 20px;
            background-color: var(--color-surface); color: var(--color-text);
            font-size: var(--font-size-small); width: 100%; outline: none;
            transition: background-color 0.3s; height: var(--header-element-height); 
        }
        .search-input:hover, .search-input:focus { background-color: var(--color-card-background); }
        .search-icon {
            position: absolute; left: 8px; top: 50%; transform: translateY(-50%);
            color: var(--color-text); pointer-events: none; opacity: 1; z-index: 10;
        }
        .clear-button {
            position: absolute; right: 8px; top: 50%; transform: translateY(-50%);
            color: var(--color-text); cursor: pointer; padding: 4px;
            border-radius: 50%; font-size: 20px; display: none;
        }
        .clear-button:hover { background-color: var(--color-background); }

        /* --- Theme Button & Profile --- */
        .theme-button {
            margin-right: var(--header-item-spacing); width: 40px; height: 40px;
            display: flex; align-items: center; justify-content: center;
            border-radius: 50%; cursor: pointer; color: var(--color-text); flex-shrink: 0;
        }
        .theme-button:hover { background-color: var(--color-surface); }
        
        .profile-logo {
            width: 40px; height: 40px; border-radius: 50%; object-fit: cover;
            cursor: pointer; border: 2px solid var(--color-surface); flex-shrink: 0;
        }

        /* --- Карточки --- */
        .album-grid {
            padding: 24px; display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 24px;
        }
        .album-card {
            background-color: var(--color-card-background); border-radius: 8px;
            overflow: hidden; box-shadow: 0 1px 3px var(--color-shadow);
            transition: box-shadow 0.3s, transform 0.3s;
        }
        .album-card:hover {
            box-shadow: 0 4px 8px var(--color-shadow); transform: translateY(-2px);
        }
        .album-card-link { display: block; }
        .album-preview {
            width: 100%; padding-top: 56.25%; position: relative;
            background-size: cover; background-position: center;
        }
        .new-badge {
            position: absolute; top: 8px; right: 8px; width: 30px; height: 30px;
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            background-color: var(--color-card-background); box-shadow: 0 1px 3px var(--color-shadow);
            z-index: 10;
        }
        .new-badge .material-icons { font-size: 20px; color: var(--color-link-active); }
        
        .album-info {
            padding: 4px 12px; display: flex; flex-direction: column;
            justify-content: center; min-height: 48px; 
        }
        .album-title {
            font-size: var(--font-size-small); font-weight: 500; line-height: 1.4;
            color: var(--color-text); display: -webkit-box; -webkit-line-clamp: 2;
            -webkit-box-orient: vertical; overflow: hidden; max-height: calc(1.4em * 2); 
        }

        /* === Mobile Styles === */
        @media (max-width: 750px) {
            .header { padding: 0 10px; }
            .logo-text { display: none; }
            .logo-link { margin-right: 0; }
            
            .sort-dropdown { margin-right: var(--header-item-spacing); }
            .sort-button { width: var(--header-element-height); padding: 0 8px; justify-content: center; }
            .sort-button-icon { margin-right: 0; }
            .sort-button-text { display: none; }
            .sort-content { left: 50%; transform: translateX(-50%); }

            .search-container { width: var(--search-width-mobile); }
            .filters { flex-grow: 0; }
        }
    </style>
</head>
<body class="light-theme">

    <header class="header" id="main-header">
        <a href="https://photos.google.com/" class="logo-link" target="_self">
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/12/Google_Photos_icon_%282020%29.svg/1024px-Google_Photos_icon_%282020%29.svg.png" alt="Google Photos Logo" class="logo">
            <span class="logo-text" id="logo-text"></span>
        </a>

        <div class="filters" id="year-filters"></div>
        
        <div class="menu-dropdown">
            <span class="material-icons menu-button" id="menu-button">menu</span>
            <div class="menu-content" id="menu-content"></div>
        </div>

        <div class="sort-dropdown">
            <div class="sort-button" id="sort-button">
                <span class="material-icons sort-button-icon" id="sort-icon">arrow_downward</span>
                <span id="sort-label" class="sort-button-text"></span>
            </div>
            <div class="sort-content" id="sort-content">
                <div class="sort-content-item" data-sort="newest"><span class="material-icons">arrow_downward</span><span data-sort-label="newest"></span></div>
                <div class="sort-content-item" data-sort="oldest"><span class="material-icons">arrow_upward</span><span data-sort-label="oldest"></span></div>
                <div class="sort-content-item" data-sort="added"><span class="material-icons">notifications</span><span data-sort-label="added"></span></div>
            </div>
        </div>

        <div class="search-container" id="search-container">
            <span class="material-icons search-icon" id="search-icon-small">search</span>
            <input type="text" id="search-input" class="search-input" placeholder="">
            <span class="material-icons clear-button" id="clear-search-button">close</span>
        </div>

        <span class="material-icons theme-button" id="theme-toggle">nightlight_round</span>

        <img src="https://lh3.googleusercontent.com/a/ACg8ocLU5rbDdy25qbia4Zv6ltz5hHFRWhP79PncRQ9CQ-cdm9nYRfxxmw=s96-c" alt="Profile Logo" class="profile-logo">
    </header>

    <main class="album-grid" id="album-grid"></main>

    <script>
        // --- ЛОКАЛИЗАЦИЯ ---
        const TRANSLATIONS = {
            'title': { ru: 'Мои альбомы Google Фото', uk: 'Мої альбоми Google Фото', en: 'My Google Photos albums' },
            'logo_text': { ru: 'Google Фото', uk: 'Google Фото', en: 'Google Photos' },
            'all_filter': { ru: 'Все', uk: 'Всі', en: 'All' },
            'newest_sort': { ru: 'Самые новые', uk: 'Найновіші', en: 'Newest' },
            'oldest_sort': { ru: 'Самые старые', uk: 'Найстаріші', en: 'Oldest' },
            'added_sort': { ru: 'Недавно добавленные', uk: 'Нещодавно додані', en: 'Rescently added' },
            'search_placeholder': { ru: 'Поиск...', uk: 'Пошук...', en: 'Search...' },
            'not_found': { ru: 'Не найдено...', uk: 'Не знайдено...', en: 'Not found...' }
        };

        function getLocaleStrings() {
            const userLang = (navigator.language || navigator.userLanguage).toLowerCase();
            let lang = 'en'; // По умолчанию - английский

            if (userLang.startsWith('ru')) {
                lang = 'ru';
            } else if (userLang.startsWith('uk')) {
                lang = 'uk';
            }

            const strings = { lang: lang }; // Добавляем определенный язык в объект
            for (const key in TRANSLATIONS) {
                // Используем строку для выбранного языка, с резервом на английский
                strings[key] = TRANSLATIONS[key][lang] || TRANSLATIONS[key]['en'];
            }
            
            // Устанавливаем атрибут lang на HTML-теге
            document.documentElement.lang = lang;
            
            return strings;
        }

        const STRINGS = getLocaleStrings();

        // *** МАССИВ АЛЬБОМОВ ***
        const albums = [
  { "id": 1, "title": { "ru": "The Art of the Brick: LEGO", "uk": "The Art of the Brick: LEGO", "en": "The Art of the Brick: LEGO" }, "prefix": "2025.10.18 - ", "date": "2025-10-18", "addedDate": "2025-10-18", "url": "https://photos.google.com/share/AF1QipOL07Gdf5WhqNH_u-U2EtRjbTKI1Xq80xNxmBLm5thlY2FqSjoaxs5Ftv28HyXP2w?key=Q1dzUzhTam9Va3V3dUJhcndaSllVUEdyTDNJd3V3", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczMuzdEDPTPi4RmHW8Qe9UVEo55ZquXneUYdPc5BA8dhbIzzYe-Vp5eqTpHgUwQAzysJe7Chm9v-BefIyQdY0HLzy1t5oB_A1NbnVNfzMWJmuyVCMmLT=w600-h315-p-k", "year": "2025" },
  { "id": 1.1, "title": { "ru": "Salaberry-de-Valleyfield", "uk": "Salaberry-de-Valleyfield", "en": "Salaberry-de-Valleyfield" }, "prefix": "2025.10.12 - ", "date": "2025-10-12", "addedDate": "2025-10-12", "url": "https://photos.google.com/u/0/share/AF1QipPtneBhpGLjMjvwI03yUqpO9UigNZSWreCRLWjTaYZCguQV7xV-6-lD1A57y_Hkcw?key=eUFPZWYzcU5HWEdkZTBwWlFsU1dxZjdUeXVpVENn", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczPSN9BMn3i05gYNJrYwvaF0o2cbaYHSksLnavOi8zdnTFQBedqvrdC0CiSaAfD0rfLBxCMd6GCWyQFHM-TAkCLFg-Lvk_f6jST5wLYPhL6WY4-uo9mz=w600-h315-p-k", "year": "2025" },          
  { "id": 2, "title": { "ru": "Июль-октябрь", "uk": "Липень-жовтень", "en": "July-October" }, "prefix": "2025.06-10 - ", "date": "2025-10-12", "addedDate": "2025-10-12", "url": "https://photos.google.com/share/AF1QipONnpB9m8BMKVaN15lZT1HKWzWLlyJ_-yPpJx2Nx37hwpxlXHAJuUq_mTvbh18d6A?key=N09BQUc5d3BkX2tMS3Ztb19xX3E4Z0NmeGkyUzZB", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczOUU2ERZWT24-3OstV3ojOPxo9gb7AdhUcSnXkmx722phucU6KuBHRzKJkKS5IKLbaZmy9yrj2CiDm5IDG6tvTu_uLOwdg8VcCkrAPKQJQTugAhIkaL=w600-h315-p-k", "year": "2025" },
  { "id": 3, "title": { "ru": "Mont-Rigaud", "uk": "Мон-Ріго", "en": "Mont-Rigaud" }, "prefix": "2025.10.11 - ", "date": "2025-10-11", "addedDate": "2025-10-11", "url": "https://photos.google.com/share/AF1QipOq7D5o7TUKLYpvcNGdKbLDkdQTONQb7j2u6yBXOsqMll0QpLynaqd-aCqrQJAruQ?key=ckFjcHEyWXdMQ1Q3VXpKZE04enctcWxYbEJwNzlB", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczOc061P1RYpN6udUi86Gc8s4o1VtfXinRvSpUaiCeVey8ZMESATlVJXRLSH4IC-7IcRuuDAMA8Ty-pp-tRpvNTH33wwWSqE0GZwrsi6YSEKvvXL5jcY=w600-h315-p-k", "year": "2025" },
  { "id": 4, "title": { "ru": "Regina 3", "uk": "Реджайна 3", "en": "Regina 3" }, "prefix": "2025.08.30-31 - ", "date": "2025-08-31", "addedDate": "2025-08-31", "url": "https://photos.google.com/share/AF1QipOjF6X_GiUweoWxYNFevWtuNTgbc8rt5ZDBoKssybPOiKq3PTxN1uym1dBs6vzn0g?key=ZVFIUVVEZktkR1VsSG0zZ1ZBMDk1SGxmcGpmcU5R", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczOClqsQQsW9EmrEYWg2RIxUc3x6wASfp40Et0FFHNdWG_sGtPY_Zd2GZiZfTVaONxUkmrvQGUGA0rN8Glr5gJw4JpJsYPFKmUAz-YVUMV30B_V1jGEg=w600-h315-p-k", "year": "2025" },
  { "id": 5, "title": { "ru": "Автошоу на Иль-Перро", "uk": "Автошоу на Іль-Перро", "en": "Car Show on Île-Perrot" }, "prefix": "2025.07.20 - ", "date": "2025-07-20", "addedDate": "2025-07-20", "url": "https://photos.google.com/share/AF1QipPrXVV7n7DlRWCkOgld1DnSJrmhWxfoCR2XSXXRyOzDcBUy28NsXe7nzkSyysBWEw?key=ZUFHY1ZyZXBRd05kY0d3U0V1clZ3SGhKcUIwUHV3", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczOk6h-_hHumsY67SLL0saF1knc5VvPo67PahQOwVLWLcRIFsqpdH3LB63y23d_3QlaEuMYe3e3bmzV__M7NVnILZr3w-QQFl8CwcTqo9u7sz5_otoma=w600-h315-p-k", "year": "2025" },
  { "id": 6, "title": { "ru": "ДР Арсения в Canada's Wonderland, Торонто", "uk": "ДН Арсенія у Canada's Wonderland, Торонто", "en": "Arseniy's Birthday at Canada's Wonderland, Toronto" }, "prefix": "2025.07.10-12 - ", "date": "2025-07-12", "addedDate": "2025-07-12", "url": "https://photos.google.com/share/AF1QipMpCbAVqDJXIC3iUW9YdzvPCluw4qbd44K5Z35uqLraSa0YIiY65F5awAiArOjB8Q?key=cFBhSk8zSVJkak9WYS1TRjE2dEhpSTc4VldmNDFn", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczOwGY-YaiDOsygIqCGogLh9SonLKBQq1V_1Lcn4gWn6k8Yi-Qf89wzDraoOhHwEFCo1nD6OZJuFyrr2PQtk11e2q3LuDyxpuJr3_7F7mVMtMX3Ll8Ed=w600-h315-p-k", "year": "2025" },
  { "id": 7, "title": { "ru": "Каяк", "uk": "Каяк", "en": "Kayak" }, "prefix": "2025.07.06 - ", "date": "2025-07-06", "addedDate": "2025-07-06", "url": "https://photos.google.com/share/AF1QipMYrnZCgCUiRJcwmlqxI8TBGV7p_JP9_m-DCb1du83FUQ4ja4ZYA7WZvhoULxh3Rw?key=QW02UmdjUWk3UWl6V3Z5a3czQ0pSOE9VM2NHNkRR", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczPhzJ33tg3ncbgObkQ414wpsWpNAXHtI42XYYElvHF2eXKmrMG5JABG-8iciNgfosSM_egVSGdB2EUndRBpOzwN5UiwvhkLRYCVV0Lk9UXka6tSbLgq=w600-h315-p-k", "year": "2025" },
  { "id": 8, "title": { "ru": "Январь-июнь", "uk": "Січень-червень", "en": "January-June" }, "prefix": "2025.01-06 - ", "date": "2025-06-29", "addedDate": "2025-06-29", "url": "https://photos.google.com/share/AF1QipN5VJ2pq_bl2WgQtWeK7dEjJuBWCDgvl32w3_WPOini78-tQaXJNjhUsBsdxwYryA?key=OThKWDZJWjZqYWEzbllVXzdUY2I0TkFtY3htdzln", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczMRwe17WUYeF6Kt2xkIGZjLJRtHHtxxUtAQxNJUzN1HIT-2ZeiGWVmDsLA_9eFi5CKgk2qu7Ch6WQbZmqtjQ1rrFzg-D7xkxE5YxkI3K1JbaYeKILBB=w600-h315-p-k", "year": "2025" },
  { "id": 9, "title": { "ru": "Arsenii graduating", "uk": "Випуск Арсенія", "en": "Arsenii graduating" }, "prefix": "2025.06.13 - ", "date": "2025-06-13", "addedDate": "2025-06-13", "url": "https://photos.google.com/share/AF1QipOa-8dyQwt5zpyxbH3RCQCQE-r7Q-4nDYJGjysV8SoXp3gKdTDV5B7EuQxZxrAgNw?key=X3FOcHNmYWVOU1FDUVUwazZlVFYwdEpDUTd5R3ln", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczP8mCuppkICIefK_F8rind4L4_VPo4JxnO5zBA0Bczm7dpu0L2i5JHm-3dH_xG-1LTkHkrX849tVnZk9dNvZDNVYwePMf5zmN7LJsUxoKYcaRkquXSf=w600-h315-p-k", "year": "2025" },
  { "id": 10, "title": { "ru": "Фестиваль старины в Vaudreuil-Dorion", "uk": "Фестиваль старовини у Vaudreuil-Dorion", "en": "Vintage Festival in Vaudreuil-Dorion" }, "prefix": "2025.06.07 - ", "date": "2025-06-08", "addedDate": "2025-06-08", "url": "https://photos.google.com/share/AF1QipOLtFi2rgHA1rZUjcTufoVxWbbfA5UnLzmrpEoOHKVW3bMXq0c0r2nFQOYZJ1m9wg?key=M1Y0TkRFa2V3eEUyTlFRSEhJVlNwTXZSb1lpYml3", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczODcpIFmOdwKskVlJZ7gVZz36D7-LS-z5wM--Yh5aJaRru21b2EkuV9ShzDGM6ZieyMi9rqzD525ZlN4jdIRMFYgYnW4G8P_PtgcTTeVg_NXIcGf-iq=w600-h315-p-k", "year": "2025" },
  { "id": 11, "title": { "ru": "Disturbed, Three Days Grace, Sevenfold", "uk": "Disturbed, Three Days Grace, Sevenfold", "en": "Disturbed, Three Days Grace, Sevenfold" }, "prefix": "2025.03.19 - ", "date": "2025-03-19", "addedDate": "2025-03-19", "url": "https://photos.google.com/share/AF1QipOwkX2sqo0Gsr89h5mY1CPCO0PAeK38G9geX7aRTiWebSFFUIuvSgNWamSYNj0STg?key=cmhOS3VJUllmeTM3TmN1cTVRNGlwNmJyVk5Sb1pR", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczNaB3iIXKwppQ1tbozVH98MUwFXdPWZW6MDn2Gg2BxpyrpQtjIDAwkKfDkMRRRyHp7DJaKvVLWzOXpq0Brt6_dETZCEPZyT-ac0qIEoDGuPl9NWAOCF=w600-h315-p-k", "year": "2025" },
  { "id": 12, "title": { "ru": "Apocalyptica, Nita Strauss", "uk": "Apocalyptica, Nita Strauss", "en": "Apocalyptica, Nita Strauss" }, "prefix": "2025.02.12 - ", "date": "2025-02-12", "addedDate": "2025-02-12", "url": "https://photos.google.com/share/AF1QipOQqEbV8AvxQgSdtdamlCEWWABJ9eFjPw5zg4XKfPxIjgRdCedpLYNOt3EyI344FA?key=cS0xaXo1cXVCemJjQ09QcHZyRmg4WmRzQWFKVUdB", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczOOAHgIFaFie4VuzuM6dU-lp0j-c86gUz1FXKCLlh2KKH2GWPTHffTDvtUyLO0CLvLtCRB_EmcQIdNhD0dS82ylz_dFXUn24I7-p0i5uFt-0adIi-8i=w600-h315-p-k", "year": "2025" },
  { "id": 13, "title": { "ru": "Regina", "uk": "Реджайна", "en": "Regina" }, "prefix": "2024.11.21-24 - ", "date": "2024-11-24", "addedDate": "2024-11-24", "url": "https://photos.google.com/share/AF1QipOpk7ONVQYIjQDa7MKHJ391jq0kjQnOZTV5k3qJWK2SGyrNRlbjTluI3WtJnqdv3w?key=WlU0cDI2a0NwZG9ROTNqRUp4SnRPMC1XSmRWY2Rn", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczMW9REYoyVKEW63BaRuGm5JqXWHEfvo9s4ovzn_Ff5_iiXFY9zUz_UCFBdxIp5zfM8eSF-dD0RnBPDd3kpJQR9Vq8OAGXbSxgPy4rqUB5TBgXJewG82=w600-h315-p-k", "year": "2024" },
  { "id": 14, "title": { "ru": "Royal Saskatchewan Museum", "uk": "Королівський музей Саскачевану", "en": "Royal Saskatchewan Museum" }, "prefix": "2024.11.24 - ", "date": "2024-11-24", "addedDate": "2024-11-24", "url": "https://photos.google.com/share/AF1QipOO6vujvv3XEUUiCKcT7JhwuDXLW1Aj3rzUoZG8k9qHmIX5hZvLfSPdkFqZWd-x_g?key=blRNRHNOSkhRSUJkTXVxbGVSX1dDVDAzcjVfclJB", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczPtfch0uaVqAvNFAy1xxpwNxMZTBQtkJnty9OGSsktllh7uyuwqmWmLjlTnyK87YgqhdoWYE7uYByyj-aNhIAWiI7l_WigLn2m-iSoTwDiVtf-xlf9G=w600-h315-p-k", "year": "2024" },
  { "id": 15, "title": { "ru": "Matviy's birthday", "uk": "День народження Матвія", "en": "Matviy's birthday" }, "prefix": "2024.11.16 - ", "date": "2024-11-16", "addedDate": "2024-11-16", "url": "https://photos.google.com/share/AF1QipM-4pg3DRpbnzI-YiMY-0_DcDP7htDK6yxl2b_kA2rxxoIKce5pIJXaDhpV6fZXHw?key=YVZ6aEc0bldoTWxzbEJybWJScXJCZDJWSXBvanNn", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczNgHq5c3BhFup6sZnue29MZDeYhUJYceiQSE1758Hmy04_TP6dYnKD8WitWZqlf4PH7lFgy9Xt8ZgkoCgeyXB5wyR3E8imbActAoQcw-CpLSuIuPWhG=w600-h315-p-k", "year": "2024" },
  { "id": 16, "title": { "ru": "Toronto", "uk": "Торонто", "en": "Toronto" }, "prefix": "2024.10.25-27 - ", "date": "2024-10-27", "addedDate": "2024-10-27", "url": "https://photos.google.com/share/AF1QipPFl3zS_rKNuWeZbaoZvoXguhx_T40SLG8CK4_DpyFVUhN42AY_IktDwxKWVtkbSw?key=NW1zX29aSjdoV2EzNzUtWWV3VlBUc1VNUEQ0TmJR", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczOYvRonJuPW7jQSp2v2vRQC-2NGeN-dqhFYV4P6gVmIX4JP0Xqd7yk_UMwa2KHiNIJ9NAHTZW67KAZSifoH4d71lqlxaKgizhX5O5a0fczPPYpNXhZP=w600-h315-p-k", "year": "2024" },
  { "id": 17, "title": { "ru": "The Village at Black Creek", "uk": "Село біля Блек-Крік", "en": "The Village at Black Creek" }, "prefix": "2024.10.27 - ", "date": "2024-10-27", "addedDate": "2024-10-27", "url": "https://photos.google.com/share/AF1QipM1nX_mzlHdtgjClu-Gf2WWrCAms5WG0HQ9-lfnmGhPv81mQTmis-BX_qPRpsn0Ug?key=alVSU3JWUlJ2UlB4Z3NmOVRqb084OU9WZGtIbGZR", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczPbQHoUlnqxOj_ac6moz2L0A5_cBlsgyEmD3b2SEzOV_jFqUBtt4Ky_SC5dEX-75M_eX7Nz-v5xkFSkhZEigSoxhkFvLpnSzvsjDGn1IaAwYGYmfNNg=w600-h315-p-k", "year": "2024" },
  { "id": 18, "title": { "ru": "Vaudreuil-Dorion 2", "uk": "Водрей-Доріон 2", "en": "Vaudreuil-Dorion 2" }, "prefix": "2024.09.14-15 - ", "date": "2024-09-15", "addedDate": "2024-09-15", "url": "https://photos.google.com/share/AF1QipN1q50lCXBJvlUCyqHrTXtqI5FMEpxhoWXzaMKsJJSxeqYbt67-dd3DztOymY2syg?key=ckxWNEtSSldGcDdMeDVoNElOVUsydjJVQlczeGR3", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczMENswU729Bpte_TZ3q9HhuYdY4GpyDeuhrvxgJnFX-i2U7w82u4_6FLoZ081kwF4J2Jn2ZQ5_xEmb9UlunFdfiwfyIDCYxsDmTkni5gxEI0wUBnDr6=w600-h315-p-k", "year": "2024" },
  { "id": 19, "title": { "ru": "Vaudreuil-Dorion", "uk": "Водрей-Доріон", "en": "Vaudreuil-Dorion" }, "prefix": "2024.08.23-27 - ", "date": "2024-08-28", "addedDate": "2024-08-28", "url": "https://photos.google.com/share/AF1QipPDjbtO2OKxxtKipdO0Z79IXnGkbl1DC6JSWK946J1speLCJwNg5wUmfMjr8W4bmg?key=TmFma0poRjhfZTVaYWEyRmtkc29nSHhIQnM1em9B", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczO52YCRcSfzc4FEq2PQ-LBeizUmmmZkqB_1lunVbZwHkhFuzxCJK6IgG_yFaur9ljd66-aEZ-cEucc-bBIS2P6cNRghDqVkVWrjqNVX137KMzkZg0bm=w600-h315-p-k", "year": "2024" },
  { "id": 20, "title": { "ru": "Montreal", "uk": "Монреаль", "en": "Montreal" }, "prefix": "2024.07.25-31 - ", "date": "2024-07-31", "addedDate": "2024-07-31", "url": "https://photos.google.com/share/AF1QipNOQ5U7dvJrsLtHIMUEBqxkD350uB3HqBfZMnbsejWKNeYCKIJeHqPUCaEq3Ez34Q?key=R19rX2dFMkJYbXNJMXE0bENOOHU5OEZQVGRhc3VB", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczPH9mDSGmYAU0RIfndE7NGe170yA9bcp0T7izOUv9ovb7XUqPhjVCtyUhA8H9niOUJWxVeYcuNe7HUCwvSm9ivzdXVdcQf9Q_CDyQhE0hcDGAbStFI6=w600-h315-p-k", "year": "2024" },
  { "id": 21, "title": { "ru": "Гатино, Оттава", "uk": "Гатіно, Оттава", "en": "Gatineau, Ottawa" }, "prefix": "2024.05.19-22 - ", "date": "2024-05-22", "addedDate": "2024-05-22", "url": "https://photos.google.com/share/AF1QipOTKRTzwkPr3jRyl1Zt_H_0j-hMDHOF4Lup57ciMtX7uBPLXfZvnjSrcu2WbNSkQQ?key=VzNtclhKNEVEbGRSUVJ0dll4TERnc0o5eTRzUEFn", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczPWnzF5FFXh-cFczClcsW_EuPvHwCqw5aDPYT4QaKQ7dvwkbYxVR4uMGiFXDnRfZ4Nacdztt4iZCPNQ5jlvid8AObNqbxAxgkQAFor1JpQqJyDWlOVP=w600-h315-p-k", "year": "2024" },
  { "id": 22, "title": { "ru": "Январь-февраль", "uk": "Січень-лютий", "en": "January-February" }, "prefix": "2024.01-02 - ", "date": "2024-02-17", "addedDate": "2024-02-17", "url": "https://photos.google.com/share/AF1QipMHkKcx6qtRFfWI8PEUnBSgptRQ6Fcw1GvOLIgvL7bktEkCkN1CnX0U8AWXrL5bJQ?key=QTY5UHN0MW9GS1h6eXBkUGJ1cUlSRnNmUjBPY21B", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczMETBkdEKqH4gCQ2czh3JqWdCx7MREjb0qXR_A0Mu_bSUJkp8Xm-_6qDE8ZoD6A3hAz7GMNm5DOcyCB8vNsPbYr3R-I9wGoiXsBfLi3fgwihhThY-Hx=w600-h315-p-k", "year": "2024" },
  { "id": 23, "title": { "ru": "Автосалон-2024", "uk": "Автосалон-2024", "en": "Car Show 2024" }, "prefix": "2024.01.27 - ", "date": "2024-01-27", "addedDate": "2024-01-27", "url": "https://photos.google.com/share/AF1QipNUU9VkTaQGDn6IWAbgJgbQiHdo5Km9HRJYBjzEPpQPtnAb_36kwEuEKC-Bb4FqrA?key=OFNrUXhzdk92WEw5RVN2UDlqNk1lMVdKREFtS2FB", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczN78Um6RVx7VjWRmGdGGruuqSz3YeCy5cSASv9VkV4A4eHC5wPip0HE-JRQoUFVpSP43IK7DNdLkm67A5LncvB7xy0nAMrs6IVjEnoX5jnhkRywxhFj=w600-h315-p-k", "year": "2024" },
  { "id": 24, "title": { "ru": "Прогулка в центр Монреаля", "uk": "Прогулянка у центр Монреаля", "en": "Walk in Downtown Montreal" }, "prefix": "2023.12.08 - ", "date": "2023-12-09", "addedDate": "2023-12-09", "url": "https://photos.google.com/share/AF1QipPb3NvNXtjgIvfIzaX531-SDfMUenUah6XmK4R-3ce7ANod7_fdKU0fSqK6wCaQfg?key=SWMzVEU3RDF6dm9KbHk0MzRNTU5VMjczZXo1MG1n", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczNLX2fpfaGQm7kN8-Nd_DuVKLnVVsdlljab8T0T2yxEe3iRD6wN20qNI78xrZOwptsUDzPH-1jTzKVnaHsepeXgS-EF5GiduE17anhevIaAt57Iuk1I=w600-h315-p-k", "year": "2023" },
  { "id": 25, "title": { "ru": "Июнь-август", "uk": "Червень-серпень", "en": "June-August" }, "prefix": "2023.06-08 - ", "date": "2023-08-29", "addedDate": "2023-08-29", "url": "https://photos.google.com/share/AF1QipNzfQt-fohQvZCM8CoUbE9ae6siJP6EuLY2y095Dy4SNB3XhOPMsJiurjFJq-T3vA?key=d0ZHTEVjeUNPckRSYkIxRVJ4ZnVVZVdpa1o0dXpR", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczNo2iwukWjKufuyEZTcXf_uZWk2gGUetjB2uUtumVbGttZF6G6G0xJiZ-4JaWOU4FqAVZbHEQ7CAim-mnjSvik7C86xI8gwY6wELM4dB8c3Z31iC23r=w600-h315-p-k", "year": "2023" },
  { "id": 26, "title": { "ru": "Музей иллюзий", "uk": "Музей ілюзій", "en": "Museum of Illusions" }, "prefix": "2023.08.13 - ", "date": "2023-08-13", "addedDate": "2023-08-13", "url": "https://photos.google.com/share/AF1QipMC5v_yFET6QZSNKV-Jbbm_tilBqbEGrWNQbqfm3Q0yAvqbu0e14DVYf_Q3HDxRUQ?key=Ui03RDhVX3ZteDVqRVBMSVlMNzljRmpRd2E3NXhB", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczPkuwl_eyZcPToOx0GlGfTa5ALIbYWB8IzQJSCU80Yary8ApRbFbo0OLnpP-r70N8bWxb5oBP1YemavUIPJEwq_m1LZ80-rixWojXLt-tiTe2k8qAAu=w600-h315-p-k", "year": "2023" },
  { "id": 27, "title": { "ru": "Кемпинг на Ляк Симон", "uk": "Кемпінг на Лак Симон", "en": "Camping at Lac Simon" }, "prefix": "2023.08.04-07 - ", "date": "2023-08-06", "addedDate": "2023-08-06", "url": "https://photos.google.com/share/AF1QipNKhpoPrZyR5gP0aqENij8Lpzt9ltsc55bNjzRrwLeIr0_-kFqVqUAkVOcgXbwlOQ?key=WkxxdzVDOGYyaE5nek9WSnRncWQxUWNLMThDLVZn", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczNCk15hk7ovQXpuhSSOTBdEtYSC60BUwrFWQhRYSQ91RopBSA09dxPFnOwR1vAiEbZy_LE55oBOuDxy_hKH5mdKEc2SwBK6SQXCHJJ1m8oBxWiNHnEw=w600-h315-p-k", "year": "2023" },
  { "id": 28, "title": { "ru": "Кемпинг на Ляк ля Пеш", "uk": "Кемпінг на Лак ля Пеш", "en": "Camping at Lac la Pêche" }, "prefix": "2023.06.30-07.03 - ", "date": "2023-07-03", "addedDate": "2023-07-03", "url": "https://photos.google.com/share/AF1QipOZheCT9XVuxn1nswHJt17QycErxCT5G6OrKbKW1MFK7oAXTG1tXgm-vfH8Dk87Kw?key=cEJselhjTENzSkt2bUxFclpLRjNBT3ZoUVJZUUpR", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczOxSWdVkZlsh9El1OvhfCeriaQukFsh1e9Pr09wIjIunYd2xZ4zt3mB87JXMAwniZ22L1w2YDIjBEfahaob3qv_okr4w_1NAnHs_ggcF9Uz_IVtf_b6=w600-h315-p-k", "year": "2023" },
  { "id": 29, "title": { "ru": "День Квебека", "uk": "День Квебеку", "en": "Quebec National Holiday" }, "prefix": "2023.06.23-24 - ", "date": "2023-06-24", "addedDate": "2023-06-24", "url": "https://photos.google.com/share/AF1QipN4g61Jp7y_Hu9m3cTgDXNLK6C_1b98_GNQficxlwG-syoKaVSmoBmQ0o_M7JASsQ?key=NFRtZi1lYk16UFBEeUY2M2stRUJ5Z1lIaHN6c2lB", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczNSoyw73YMXepHKWIGWgqmuPbEanQZ2_g-SXPD0y9g8waGi7qJmIfphjsbkn75RNYX1LiWAPXkmdI9jm6gs5iFOjfxDmdx7WFLoluFZIsLiyC7nuSP7=w600-h315-p-k", "year": "2023" },
  { "id": 30, "title": { "ru": "Март-май", "uk": "Березень-травень", "en": "March-May" }, "prefix": "2023.03-05 - ", "date": "2023-05-31", "addedDate": "2023-05-31", "url": "https://photos.google.com/share/AF1QipPXU0Xktu6W5wlTbvtop4XTVXf5DKNSxlunVW23kuGWGRKO-9gBxaKfjc0UyuMK6A?key=STc0LUtDMWNZSTVYdFhrUDVVdElUX01nSUowSTFB", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczPhZNSUZN0bwr2uGVTkji3CF-FfxIRe1YaxeQ0elkAJLFSnTXWWsXeiKSnKIIK1SY20uYLGw2T8u8uLDwfSd_n8RgyxIy9K6IsAp7kJNY3nhs_ROLl_=w600-h315-p-k", "year": "2023" },
  { "id": 31, "title": { "ru": "Оттава, фестиваль тюльпанов", "uk": "Оттава, фестиваль тюльпанів", "en": "Ottawa, Tulip Festival" }, "prefix": "2023.05.14 - ", "date": "2023-05-14", "addedDate": "2023-05-14", "url": "https://photos.google.com/share/AF1QipPGLtgKX9IJHuMeZteC7NEqCMaWkfotA7msRrIQgQlhKQZSoSZqyUIKgVrCZPG53w?key=ajFQdjNTR0hsZzh1MTZPQXdoZlBOOGM0b1dZelVn", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczPiJpJ4zocvG5VBScZIoXARmssMP80t3WdKzjGWM1GfJwx-gE9k1T1OmsFqhD6A56w0ZalYY1dj5AiJ8O2aavcY7suRFyNheq_p6PAWxGD33SJ5S_C4=w600-h315-p-k", "year": "2023" },
  { "id": 32, "title": { "ru": "Сан-Совёр, горки", "uk": "Сен-Совер, гірки", "en": "Saint-Sauveur, slides" }, "prefix": "2023.03.11 - ", "date": "2023-03-11", "addedDate": "2023-03-11", "url": "https://photos.google.com/share/AF1QipNEyxm1q_AU6w0E1YbEk5QYv0owz7QrIJkSSz6688JLMdMOHKYRGe7XdJHNusvC6w?key=dkpweUlPYmhfYnpnY2Z0cFRlQkkwVHVWMUw3ZFh3", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczOPIRNygs-u_Mb86QCN1MreP2KR1igb8rHufy0y88pVdheh3NL4NY5ijTW5bnb_qaEFpUtO9KLCVIYLH_hWRd8ex-CzfCTyl6Q44rqH45iWuF9TqBJ3=w600-h315-p-k", "year": "2023" },
  { "id": 33, "title": { "ru": "Автосалон-2023", "uk": "Автосалон-2023", "en": "Car Show 2023" }, "prefix": "2023.01.22 - ", "date": "2023-01-21", "addedDate": "2023-01-21", "url": "https://photos.google.com/share/AF1QipNLyZkvsQTfGh_o0VX9dJnkpFnRcMG5opC0Psvb36CsDSCoQCbWNB-o7eErui48Hw?key=dTNDUW1FQnhnc1BEaHpGSm9nS2ROU3hVMFZ4VmFR", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczOazKelQ71xjWYawehZNAFAsY5xP8-ZD4JrWCtTuVhKH7vxf3AyeFrSzzQwTArZJ1BTbJC6Cinb2g5jKuFQhXIdXHMeej3Ha1Z-XLQ1tO3WyqOxSWpz=w600-h315-p-k", "year": "2023" },
  { "id": 34, "title": { "ru": "Круиз Маями-Аруба-Кюрасао-Лабади-Маями", "uk": "Круїз Маямі-Аруба-Кюрасао-Лабаді-Маямі", "en": "Cruise Miami-Aruba-Curacao-Labadee-Miami" }, "prefix": "2022.12.08-19 - ", "date": "2022-12-19", "addedDate": "2022-12-19", "url": "https://photos.google.com/share/AF1QipNnhD2S0JwsmvS98FyfVIN-bjv87D20nRo8fbvcm_UIldQMnE-c4JyDAwnFqNZWEA?key=Tk50cW9Bcm81bkUwbUdiUHhUbHM1Y2N6WkNTLWVn", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczP78dP6G5GYK-IyaNxtLKXWcgOpcpJ0HEiS2Lx9qbfjiQvk8bnBIWa14-kbJN5ZREnyUSmJV-tJSO_MTju-RmKv-7k4uvLqoW8w3jzZtMooa36S4iVW=w600-h315-p-k", "year": "2022" },
  { "id": 35, "title": { "ru": "Сентябрь-декабрь", "uk": "Вересень-грудень", "en": "September-December" }, "prefix": "2022.09-12 - ", "date": "2022-12-03", "addedDate": "2022-12-03", "url": "https://photos.google.com/share/AF1QipPDBZ2ogio4CCPq0dm9Hg9UgDsZ_nZNwG-ZOWvbjnfqyggbXLc8V6k2br2wz6jsUw?key=QllVdzBrNW01WTFmRDRyUDFzaHlwekxPVS1fVlF3", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczPvM3-I8_3cyOqAZ-kMOSYp2dKP9C8-mFLauplH2lLa0XpDOaVCAt022XBAFsKviym3hpNdtfShbQNA905cAQrKcD7cV_2o_sc0wJzESjclhJNovRV1=w600-h315-p-k", "year": "2022" },
  { "id": 36, "title": { "ru": "Three Days Grace", "uk": "Three Days Grace", "en": "Three Days Grace" }, "prefix": "2022.11.20 - ", "date": "2022-11-20", "addedDate": "2022-11-20", "url": "https://photos.google.com/share/AF1QipNpkvNnmnLW1IedNGOXMih05FTCYg2IzidqicqsynEcIskeltIPbnFm1s-hciforg?key=THdSb0EwMldnTlFxUlVBOElZMHdNcmpBdDBJWGp3", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczOZWwbOAx59Z6Ei3nj-NaAKwr4ORiPE3O4dw_zK7vc72ywWynh2Y3tbm5EYFNgcbvty9gDZ7LY_YfFkEmUAF6YMB1DlWHi4ze1xzMtE23JvuKnePRKX=w600-h315-p-k", "year": "2022" },
  { "id": 37, "title": { "ru": "Украинский фестиваль в Монреале", "uk": "Український фестиваль у Монреалі", "en": "Ukrainian Festival in Montreal" }, "prefix": "2022.09.10 - ", "date": "2022-09-10", "addedDate": "2022-09-10", "url": "https://photos.google.com/share/AF1QipPMEIfuupWeZXkVhYblTNWi2kKMB5pIn5CSZsTmJJgg8yehD5mqbg3h8qT2MhVETg?key=R0FDVUJFUUdKUmQzSlRWaGNmUDFZVmM5WjlhR3FR", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczO0vfvwUEbPZXN-m6JjA0JhcTQwbnErHBcGNyoTc2XZietKB-QVtXGHqgy8Qg2vqCbPS_ZUYfWKV7bwR-YitolDJfq8EswJIIwBzuvBo7XYSiFBvG7a=w600-h315-p-k", "year": "2022" },
  { "id": 38, "title": { "ru": "Кемпинг на Ляк Симон", "uk": "Кемпінг на Лак Симон", "en": "Camping at Lac Simon" }, "prefix": "2022.08.20-22 -", "date": "2022-08-22", "addedDate": "2022-08-22", "url": "https://photos.google.com/share/AF1QipMIO8SMloa_g1iZGTmWueJw0ms0Wlr1xosMt7tB9pE8-tFpnBPl7gjl7WmTwgIrDw?key=eVVWUVlOTWpIMUJ5bjBpbXZkR0hZSDNNYTBNRTRB", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczNzy2qQEokjjUAXmb53O3g0CoGFB4wZJvm2YS_Sqyrv25gPlIkXedxx7MyB3Ei3thN7Ejxf18st5gasBY0MxSs0NGmD1NXh--ImmDiinsX76AKf9fd_=w600-h315-p-k", "year": "2022" },
  { "id": 39, "title": { "ru": "Берлингтон", "uk": "Берлінгтон", "en": "Burlington" }, "prefix": "2022.08.13 - ", "date": "2022-08-13", "addedDate": "2022-08-13", "url": "https://photos.google.com/share/AF1QipNbhNcyS3SKyRt4L6jDDq3FOG_voRznQFle72kGyas4CEQXSshnx5Kg812HslAxKQ?key=bmRkTHBKQ2UwZTJBSGxjUkh0Nm9JTGJWbFZJYjVB", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczPQTc18R_U-BV_BWGRLJPQZtKQB96ObHl6AHdI6m0BfwxWZ-nhMAUsXnjs3-jLVPSMwX8Vb2aE76IhIOKUsEeDR1wBhcnef1a3KNoAWrWJHVrnjRMr_=w600-h315-p-k", "year": "2022" },
  { "id": 40, "title": { "ru": "Июнь-август", "uk": "Червень-серпень", "en": "June-August" }, "prefix": "2022.06-08 - ", "date": "2022-08-12", "addedDate": "2022-08-12", "url": "https://photos.google.com/share/AF1QipMVbdQv_QMSaMq_-u7ajHVbBxhGvFJDGf35G6YwBVC6x0P9cYwWt3THBkbcdlxeIw?key=QUR5RXM3Tk16c3ZZTXhDdk5GX2NXV2gzeThxVk9R", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczN_lPx3iskHj5QhuEA2pcexNbss0sDKWwiCZEG7E46AaDdTqCZKKAiuPbdh41cHyuI5QUkEZM7ry_xScHTPdq35Fhvvb7iq3_ME8OKQpa5fcS-lH-g0=w600-h315-p-k", "year": "2022" },
  { "id": 41, "title": { "ru": "Кемпинг на Ляк Монро", "uk": "Кемпінг на Лак Монро", "en": "Camping at Lac Monroe" }, "prefix": "2022.08.05-07 - ", "date": "2022-08-07", "addedDate": "2022-08-07", "url": "https://photos.google.com/share/AF1QipOvsapnETdfB9Ryf--MEh-AGDskoKfuoZaLfm5YgLHTmm0iCrwjCE3avYQAo0O0JA?key=RFM0TkRFdFJPMzJOblNGeDN3SEhHR21Xb1h2dHlR", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczME4jQcvl1Q3EoUa2zN0VFj0Tjqcvc8k-Wk2rnsr4mfPfEGMcCDlsk10V7_9mKndiBXrlPQ73EeKNRHXcHaTzxuRWWLnVQfrT3yVDK9KiHaiCB4H_yf=w600-h315-p-k", "year": "2022" },
  { "id": 42, "title": { "ru": "Гатино, Оттава", "uk": "Гатіно, Оттава", "en": "Gatineau, Ottawa" }, "prefix": "2022.07.29-30 - ", "date": "2022-07-30", "addedDate": "2022-07-30", "url": "https://photos.google.com/share/AF1QipPSG3zDHcODfvoS3xFkZjJRCWMKYys1R-Xz0OzmVHXHHG-4_IMlTszuBxzJWebhMA?key=ZGxiQkhQNkx4S3RNRGJLdmNyU0RldFBNMVJ6a05n", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczPDKShj5U7awYUgczl3fAiChYMrD6XILdge1KENN8nx2KtCmY06twwyfmeUJHN8uiuP4OnXlEYBS12MBDjOt9vP0EtnCBgncICgTMuDV-m8N9n-3bWe=w600-h315-p-k", "year": "2022" },
  { "id": 43, "title": { "ru": "Хантингтон, каяки", "uk": "Гантінґтон, каяки", "en": "Huntington, kayaks" }, "prefix": "2022.07.23 - ", "date": "2022-07-23", "addedDate": "2022-07-23", "url": "https://photos.google.com/share/AF1QipOkmzY6hFeax_R3KPshCuHPyjHH__p7lCS8GdDH9f9wRpCsioba-2bjdjv5id1BbQ?key=bGVobjZSRFkyX285M3ZQLTItUTZ2SjdCYXNpUVJB", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczNNaJ4FBDlhd3I9yAx5vNsiOYkkTa3r-SYxUcU9Bz5gb3Jvao19qvsITJIBUT-vqt8GUd_9eniXsxUo-Q_C0cISJmmKVVZqjWfpxabg7pBsJR74XKy0=w600-h315-p-k", "year": "2022" },
  { "id": 44, "title": { "ru": "Автошоу на Иль Перро", "uk": "Автошоу на Іль Перро", "en": "Car Show on Île Perrot" }, "prefix": "2022.07.17 - ", "date": "2022-07-17", "addedDate": "2022-07-17", "url": "https://photos.google.com/share/AF1QipPHkzfKuvf-ZO1OjEMQuhZMduNVh7dNJTUIiT6WSVeFZ4Ae0D6QrIPoGZTtFYFfng?key=UnowTHl4VkI2bTVLQmVlQkxaX21Da19SLUhsZVd3", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczMB03vUXmRY4XsvR5nil9QNig2IcPwyNlZ18GXKVJMpYW2WODpjfPGlWjGeynIuBbxJ60121r-cM0B-DYUaKizJJM7T0PK3tN48hrgt_BHRjXmcK0Iq=w600-h315-p-k", "year": "2022" },
  { "id": 45, "title": { "ru": "Каньон Осейбл Часм", "uk": "Каньйон Осейбл Часм", "en": "Ausable Chasm Canyon" }, "prefix": "2022.07.09 - ", "date": "2022-07-09", "addedDate": "2022-07-09", "url": "https://photos.google.com/share/AF1QipNwPnxUnipu144Szjr9ZJl6mEgCfbWqunxmUy0xobJ-KpcTGOub_1797QeZAszfaQ?key=RTVKajRtU3VFY0hIMzloc0l2emNpNkdSdHlRTk1n", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczM0r1QY17XEQF7Z8BWCDTqFd4OhvTMTKAo0Glza48pRudS_VB-s_xZeVAWRvWQbU-c9rhDBvEDTWIDsJhB7pIpnD5Ucv5Tf-ijSNpAVE7gqIuiG5Omb=w600-h315-p-k", "year": "2022" },
  { "id": 46, "title": { "ru": "Кемпинг на Ляк Фронтенак", "uk": "Кемпінг на Лак Фронтенак", "en": "Camping at Lac Frontenac" }, "prefix": "2022.06.24-27 - ", "date": "2022-06-26", "addedDate": "2022-06-26", "url": "https://photos.google.com/share/AF1QipNGrNodWNd54EZaBHCYm43vWQga6oeP-iIpAv0gWJcNZkJdCSZ9gRscXscyvna9yg?key=bHVIMkZTaTUwd3RSMVN0Q1VCYjFwd1BjZjhjYUdn", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczNgYdzzyzLXbcniksXmMT2qZ0IMtWoPBJQv_jHyc-1OGGOIAlrUoCJ2_Z4QBaxVdEWLpk6OK3i1Ssa6DWYSZf0cq94WwdI_JhXh0L-NNAs-am0q1F1Q=w600-h315-p-k", "year": "2022" },
  { "id": 47, "title": { "ru": "Фореста Люмина", "uk": "Фореста Люміна", "en": "Foresta Lumina" }, "prefix": "2022.06.18 - ", "date": "2022-06-18", "addedDate": "2022-06-18", "url": "https://photos.google.com/share/AF1QipNFRDotFEcEUBnsiMjptKm9AQ7sxRetza5SU_ZwYj8sONbKUORTJtRG-sM7dFYHqg?key=RC1FTG5RT1BaVWFDMUtYMnNETk5Ma1hJa3VDMlVn", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczOqvBPG-27Y9OdbNz1w6u4viRvigElxbmEQHZeKxIHbEmEOM-Wn8WgSvwlxbUGD9FSATvVKfKlFWMj9RTbUhc77pKMO9l-trR9BIYmA-tYPbxDw_lCI=w600-h315-p-k", "year": "2022" },
  { "id": 48, "title": { "ru": "Март, апрель, май", "uk": "Березень, квітень, травень", "en": "March, April, May" }, "prefix": "2022.03-05 - ", "date": "2022-05-31", "addedDate": "2022-05-31", "url": "https://photos.google.com/share/AF1QipO38vjGwMAzXnrSGX2nTTWn8IlBY6GlOvjUySwacgDuuTczpYusfYedtT7_Gi4-GQ?key=U25uWHJsT19Cel9vb3lpNUpKci1rMWp5enpOU2hn", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczP_uTTJ5eLL5boSbXkpZqn4eRPPEYndOv7aFH_7CB3MXUV8KjrYQvDMSluLIhOKupm3x6w7Pqz3QZDB1BV3O3OA_9Kk8uvajqOZS0_RPIA647GX2t-9=w600-h315-p-k", "year": "2022" },
  { "id": 49, "title": { "ru": "Роудон, шале", "uk": "Роудон, шале", "en": "Rawdon, chalet" }, "prefix": "2022.05.13-15 - ", "date": "2022-05-15", "addedDate": "2022-05-15", "url": "https://photos.google.com/share/AF1QipPLoBzzEh5St1ypACDvTWruYhZovAQQur3r7C8dhAxhWuphdm3GZEBzhhCRklhJOA?key=dW9wXzhCY2g2QUFvcDhXdllhd1g1X0pGMHNyajl3", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczPqfFD9DJRYyh3X8HP98mKqt2v3lKr44dn17djIgmrdwCsLYJvIqlOFrJ_HqN7G6MuuBEcaermDF68lfOLp-s6FxT2r_02OIc-1IBe1XdIIdQhdFr4L=w600-h315-p-k", "year": "2022" },
  { "id": 50, "title": { "ru": "Apocalyptica, Lacuna Coil", "uk": "Apocalyptica, Lacuna Coil", "en": "Apocalyptica, Lacuna Coil" }, "prefix": "2022.05.04 - ", "date": "2022-05-04", "addedDate": "2022-05-04", "url": "https://photos.google.com/share/AF1QipNq_hMzl72g-VhWNvr1mPuvem3A8GMzgR-iYrUnvvnWPrC0WmW3sAKzjNFRCH6Rnw?key=eXZaV25FM05oWmFtMy00NWd1M3l4WkpDbHlmbktB", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczOlqJYnRsEjDepIAsq9iF3Qw71C8tlN1zjasp_SXTmLsGztUowipcmSga4sl2uIxXd97Qt4M8edvuSErMgH9D6Wbio9iYRwGN9WyXLlXxkw6ys158ce=w600-h315-p-k", "year": "2022" },
  { "id": 51, "title": { "ru": "Кемпинг Сандбанкс", "uk": "Кемпінг Сендбенкс", "en": "Sandbanks Camping" }, "prefix": "2021.07.12-17 - ", "date": "2021-07-17", "addedDate": "2021-07-17", "url": "https://photos.google.com/share/AF1QipMkz3KmcEOgDYy2b2ufh_XjaIBXGzloS7JZjaT8Z7m4wVeHXbECX2wDjf9h5xNvPQ?key=aklpM2JnSkNLOXJzNzVsUUgtYThsem82VGMwOWx3", "previewUrl": "https://lh3.googleusercontent.com/pw/AP1GczPb6wecQ0jhOLPlmYbeyeCzyVaNleKqeIwqi1mJV-fb9kjDMT6PW1T8W7ynCh8f-PHRN8cwrtaotBA724QppQoyf5-n9Oxg8s0EwdqpaM909xF7ZWUR=w600-h315-p-k", "year": "2021" }
];

        // --- ГЛОБАЛЬНЫЕ ПЕРЕМЕННЫЕ ---
        const STORAGE_KEYS = {
            THEME: 'album_theme',
            YEAR: 'album_year',
            SORT: 'album_sort',
            SEARCH: 'album_search'
        };

        const UI = {
            grid: document.getElementById('album-grid'),
            logoText: document.getElementById('logo-text'),
            filtersContainer: document.getElementById('year-filters'),
            menuButton: document.getElementById('menu-button'),
            menuContent: document.getElementById('menu-content'),
            menuDropdown: document.querySelector('.menu-dropdown'),
            sortButton: document.getElementById('sort-button'),
            sortContent: document.getElementById('sort-content'),
            sortIcon: document.getElementById('sort-icon'),
            sortLabel: document.getElementById('sort-label'),
            searchInput: document.getElementById('search-input'),
            clearButton: document.getElementById('clear-search-button'),
            themeToggle: document.getElementById('theme-toggle'),
        };

        const state = {
            year: 'all',
            sort: 'newest',
            search: ''
        };

        // --- ВСПОМОГАТЕЛЬНЫЕ ФУНКЦИИ ---
        function isRecentlyAdded(addedDateStr) {
            // Считаем "недавно добавленными" альбомы, добавленные в последние 7 дней
            const oneWeekAgo = new Date();
            oneWeekAgo.setDate(oneWeekAgo.getDate() - 7);
            const addedDate = new Date(addedDateStr);
            return addedDate > oneWeekAgo;
        }

        function createAlbumCard(album) {
            const card = document.createElement('div');
            card.className = 'album-card';
            const badgeHTML = isRecentlyAdded(album.addedDate) ? '<div class="new-badge"><span class="material-icons">notifications</span></div>' : '';
            
            // Определяем заголовок на основе текущего языка, с резервом на русский
            const currentLang = STRINGS.lang;
            const descriptiveTitle = album.title[currentLang] || album.title['ru'];
            const fullTitle = album.prefix + descriptiveTitle;

            card.innerHTML = `
                <a href="${album.url}" class="album-card-link" target="_self">
                    <div class="album-preview" style="background-image: url('${album.previewUrl}')">
                        ${badgeHTML}
                    </div>
                    <div class="album-info">
                        <div class="album-title"></div>
                    </div>
                </a>
            `;
            // Безопасная вставка текста
            card.querySelector('.album-title').textContent = fullTitle;
            return card;
        }

        function getSortedAlbums() {
            let sorted = [...albums];
            const compareDates = (a, b) => new Date(a).getTime() - new Date(b).getTime();
            
            switch (state.sort) {
                case 'newest':
                    // Сортировка от новых альбомов к старым (по дате альбома, убывание)
                    sorted.sort((a, b) => b.date.localeCompare(a.date));
                    break;
                case 'oldest':
                    // Сортировка от старых альбомов к новым (по дате альбома, возрастание)
                    sorted.sort((a, b) => a.date.localeCompare(b.date));
                    break;
                case 'added':
                    // Сортировка по дате добавления (убывание)
                    sorted.sort((a, b) => b.addedDate.localeCompare(a.addedDate));
                    break;
            }
            return sorted;
        }

        function renderAlbums() {
            UI.grid.innerHTML = '';
            let result = getSortedAlbums();

            // Фильтр по году
            if (state.year !== 'all') {
                result = result.filter(a => a.year === state.year);
            }

            // Фильтр по поиску (используем локализованное название)
            if (state.search) {
                const query = state.search.toLowerCase();
                const currentLang = STRINGS.lang; // Используем текущий язык

                result = result.filter(a => {
                    const descriptiveTitle = a.title[currentLang] || a.title['ru'];
                    const fullTitle = (a.prefix + descriptiveTitle).toLowerCase();
                    return fullTitle.includes(query);
                });
            }

            if (result.length > 0) {
                result.forEach(album => UI.grid.appendChild(createAlbumCard(album)));
            } else {
                // Используем локализованную строку "Не найдено..."
                UI.grid.innerHTML = `<p style="text-align: center; width: 100%; color: var(--color-text); padding: 20px;">${STRINGS.not_found}</p>`;
            }

            updateActiveClasses();
        }

        function updateActiveClasses() {
            // Фильтры
            document.querySelectorAll('.filter-link, .menu-content-item').forEach(el => {
                el.classList.toggle('active', el.getAttribute('data-year') === state.year);
            });

            // Сортировка
            document.querySelectorAll('.sort-content-item').forEach(el => {
                el.classList.toggle('active', el.getAttribute('data-sort') === state.sort);
            });
        }

        function updateSortButtonUI() {
            const map = {
                // Используем локализованные строки
                newest: { icon: 'arrow_downward', label: STRINGS.newest_sort },
                oldest: { icon: 'arrow_upward', label: STRINGS.oldest_sort },
                added: { icon: 'notifications', label: STRINGS.added_sort }
            };
            const current = map[state.sort] || map.newest;
            UI.sortIcon.textContent = current.icon;
            UI.sortLabel.textContent = current.label;
        }

        // --- Debounce для поиска ---
        function debounce(func, wait) {
            let timeout;
            return function(...args) {
                clearTimeout(timeout);
                timeout = setTimeout(() => func.apply(this, args), wait);
            };
        }

        const handleSearchInput = debounce((e) => {
            state.search = e.target.value.trim();
            localStorage.setItem(STORAGE_KEYS.SEARCH, state.search);
            UI.clearButton.style.display = state.search ? 'block' : 'none';
            renderAlbums();
        }, 300);

        // --- Инициализация Фильтров ---
        function initYearFilters() {
            const years = [...new Set(albums.map(a => a.year))].sort((a, b) => b - a);

            // Вспомогательная функция для создания ссылок фильтра
            const createLink = (text, year, isMenuItem) => {
                const el = document.createElement(isMenuItem ? 'div' : 'a');
                el.className = isMenuItem ? 'menu-content-item' : 'filter-link';
                el.setAttribute('data-year', year);
                el.textContent = text;
                el.onclick = (e) => {
                    e.stopPropagation();
                    state.year = year;
                    localStorage.setItem(STORAGE_KEYS.YEAR, year);
                    renderAlbums();
                };
                return el;
            };

            // создаем ссылку "Все" и добавляем ее в шапку
            UI.filtersContainer.appendChild(createLink(STRINGS.all_filter, 'all', false)); // Используем локализованную строку
            years.forEach(y => UI.filtersContainer.appendChild(createLink(y, y, false)));

            // Функция пересчета видимости (Reset -> Measure -> Distribute)
            function updateFiltersVisibility() {
                // 1. Сброс: Скрываем меню, чтобы узнать реальную полную ширину
                UI.menuDropdown.style.display = 'none';
                const allElements = Array.from(UI.filtersContainer.children);
                // Показываем все элементы временно, чтобы offsetWidth был корректен
                allElements.forEach(el => el.style.display = 'inline-flex');

                // 2. Замер доступного места
                const containerWidth = UI.filtersContainer.offsetWidth;
                const itemWidth = 64; // 56px + 8px margin
                const menuBtnWidth = 48; // 40px + 8px margin
                const totalNeeded = allElements.length * itemWidth;

                // 3. Распределение
                UI.menuContent.innerHTML = '';

                // Если всё влезает без меню
                if (totalNeeded <= containerWidth) {
                    return;
                }

                // Если не влезает, вычитаем место под кнопку
                const usableWidth = containerWidth - menuBtnWidth;
                let usedWidth = 0;
                let hasHidden = false;

                allElements.forEach(el => {
                    if (usedWidth + itemWidth <= usableWidth) {
                        el.style.display = 'inline-flex';
                        usedWidth += itemWidth;
                    } else {
                        el.style.display = 'none';
                        hasHidden = true;
                        // Клонируем логику в меню
                        UI.menuContent.appendChild(createLink(el.textContent, el.getAttribute('data-year'), true));
                    }
                });

                if (hasHidden) {
                    UI.menuDropdown.style.display = 'block';
                }
            }

            // Слушатели resize
            const debouncedResize = debounce(updateFiltersVisibility, 50);
            window.addEventListener('resize', debouncedResize);
            window.addEventListener('orientationchange', () => setTimeout(updateFiltersVisibility, 300));

            // Первый запуск
            requestAnimationFrame(updateFiltersVisibility);
        }

        // --- Инициализация ---
        document.addEventListener('DOMContentLoaded', () => {
            // --- Локализация статических элементов ---
            document.title = STRINGS.title;
            UI.logoText.textContent = STRINGS.logo_text;
            UI.searchInput.placeholder = STRINGS.search_placeholder;
            
            // Заполняем элементы выпадающего списка сортировки
            document.querySelector('.sort-content-item[data-sort="newest"]').querySelector('span[data-sort-label]').textContent = STRINGS.newest_sort;
            document.querySelector('.sort-content-item[data-sort="oldest"]').querySelector('span[data-sort-label]').textContent = STRINGS.oldest_sort;
            document.querySelector('.sort-content-item[data-sort="added"]').querySelector('span[data-sort-label]').textContent = STRINGS.added_sort;


            // Загрузка из Storage
            state.year = localStorage.getItem(STORAGE_KEYS.YEAR) || 'all';
            state.sort = localStorage.getItem(STORAGE_KEYS.SORT) || 'newest';
            state.search = localStorage.getItem(STORAGE_KEYS.SEARCH) || '';

            // UI Setup
            UI.searchInput.value = state.search;
            if(state.search) UI.clearButton.style.display = 'block';
            updateSortButtonUI();
            
            // Event Listeners
            UI.searchInput.addEventListener('input', handleSearchInput);
            UI.clearButton.addEventListener('click', () => {
                UI.searchInput.value = '';
                handleSearchInput({ target: UI.searchInput });
            });

            UI.sortButton.addEventListener('click', (e) => {
                e.stopPropagation();
                UI.sortContent.classList.toggle('show');
                UI.menuContent.classList.remove('show');
            });

            document.querySelectorAll('.sort-content-item').forEach(item => {
                item.onclick = (e) => {
                    e.stopPropagation();
                    const newSort = item.getAttribute('data-sort');
                    state.sort = newSort;
                    localStorage.setItem(STORAGE_KEYS.SORT, newSort);
                    updateSortButtonUI();
                    renderAlbums();
                    UI.sortContent.classList.remove('show');
                };
            });

            UI.menuButton.onclick = (e) => {
                e.stopPropagation();
                UI.menuContent.classList.toggle('show');
                UI.sortContent.classList.remove('show');
            };


            initYearFilters();
            renderAlbums();

            // --- ТЕМНАЯ / СВЕТЛАЯ ТЕМА ---

            // 1. ПРОВЕРКА НАЧАЛЬНОГО СОСТОЯНИЯ
            const applyTheme = (isDark) => {
                document.body.classList.toggle('dark-theme', isDark);
                UI.themeToggle.textContent = isDark ? 'light_mode' : 'nightlight_round';
            };

            const savedTheme = localStorage.getItem(STORAGE_KEYS.THEME);
            const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');

            if (savedTheme) {
                // Если есть ручной выбор - используем его
                applyTheme(savedTheme === 'dark');
            } else {
                // Если нет — ставим как в системе сейчас
                applyTheme(mediaQuery.matches);
            }

            // 2. СЛУШАТЕЛЬ СИСТЕМНЫХ ИЗМЕНЕНИЙ (Самое важное для вас)
            // Сработает, если вы поменяете тему в настройках телефона, не перезагружая страницу
            mediaQuery.addEventListener('change', (e) => {
                // Меняем тему автоматически, ТОЛЬКО если пользователь НЕ переопределил её вручную
                if (!localStorage.getItem(STORAGE_KEYS.THEME)) {
                    applyTheme(e.matches);
                }
            });

            // 3. Ручное переключение по кнопке
            UI.themeToggle.onclick = () => {
                // Смотрим, какая тема сейчас, и меняем на противоположную
                const isCurrentDark = document.body.classList.contains('dark-theme');
                const newThemeIsDark = !isCurrentDark;
                
                applyTheme(newThemeIsDark);
                
                // ЗАПОМИНАЕМ выбор. С этого момента автоматика (пункт 2) перестанет работать,
                // пока пользователь не очистит кэш. Это стандартное поведение.
                localStorage.setItem(STORAGE_KEYS.THEME, newThemeIsDark ? 'dark' : 'light');
            };

            // Close menus on outside click
            window.addEventListener('click', () => {
                UI.menuContent.classList.remove('show');
                UI.sortContent.classList.remove('show');
            });
        });
    </script>
</body>
</html>

